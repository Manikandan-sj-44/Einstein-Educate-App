<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Dashboard</title>

<link rel="stylesheet" href="styles.css">

<style>
.dashboard-title {
  font-size: 20px;
  margin-bottom: 15px;
}

.subject-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
}

.subject {
  padding: 20px;
  border-radius: 18px;
  color: white;
  font-weight: bold;
  cursor: pointer;
  text-align: center;
  transition: transform 0.2s;
}

.subject:hover {
  transform: scale(1.05);
}

/* ğŸ”¥ SELECTED SUBJECT */
.selected {
  outline: 4px solid #000;
  outline-offset: 3px;
  box-shadow: 0 0 15px rgba(0,0,0,0.5);
}

/* Colors */
.maths { background:#ff9800; }
.english { background:#9c27b0; }
.cs { background:#03a9f4; }
.gk { background:#4caf50; }

/* Levels */
.level-btn {
  width: 100%;
  padding: 12px;
  margin-top: 10px;
  border-radius: 25px;
  border: none;
  font-weight: bold;
}

.locked {
  background:#bdbdbd;
  cursor:not-allowed;
}

.unlocked {
  background:#4caf50;
  color:white;
  cursor:pointer;
}

.logout {
  margin-top:20px;
  background:#9e9e9e;
  color:white;
  padding:12px;
  border:none;
  border-radius:25px;
  width:100%;
  font-weight:bold;
}
</style>
</head>

<body>

<div class="card">

<h3 class="dashboard-title">ğŸ“š Choose Subject</h3>

<div class="subject-grid">
  <div class="subject maths" data-sub="maths">â• Maths</div>
  <div class="subject english" data-sub="english">âœï¸ English</div>
  <div class="subject cs" data-sub="cs">ğŸ’» CS</div>
  <div class="subject gk" data-sub="gk">ğŸŒ GK</div>
</div>

<h3 style="margin-top:20px;">Choose Level</h3>

<button id="easy" class="level-btn unlocked">EASY</button>
<button id="intermediate" class="level-btn locked">INTERMEDIATE ğŸ”’</button>
<button id="advanced" class="level-btn locked">ADVANCED ğŸ”’</button>

<button onclick="location.href='badges.html'" class="level-btn unlocked">
ğŸ… View Badges
</button>

<button class="logout" onclick="logout()">Logout</button>

</div>

<script>
let selectedSubject = null;

/* ---------- SUBJECT CLICK ---------- */
document.querySelectorAll(".subject").forEach(card => {
  card.addEventListener("click", () => {
    selectedSubject = card.dataset.sub;
    localStorage.setItem("subject", selectedSubject);

    document.querySelectorAll(".subject")
      .forEach(el => el.classList.remove("selected"));

    card.classList.add("selected");

    applyProgress();
  });
});

/* ---------- LEVEL CONTROL ---------- */
function applyProgress() {
  const progress = JSON.parse(localStorage.getItem("progress")) || {};

  resetLevels();

  // Easy always unlocked
  unlock("easy");

  if (!progress[selectedSubject]) return;

  if (progress[selectedSubject].easy === 100) {
    unlock("intermediate");
  }

  if (progress[selectedSubject].intermediate === 100) {
    unlock("advanced");
  }
}

function resetLevels() {
  ["intermediate","advanced"].forEach(id => {
    const btn = document.getElementById(id);
    btn.className = "level-btn locked";
    btn.innerText = id.toUpperCase() + " ğŸ”’";
    btn.onclick = null;
  });
}

function unlock(id) {
  const btn = document.getElementById(id);
  btn.className = "level-btn unlocked";
  btn.innerText = id.toUpperCase();
  btn.onclick = () => startQuiz(id);
}

/* ---------- START QUIZ ---------- */
function startQuiz(level) {
  if (!selectedSubject) {
    alert("Please select subject first â—");
    return;
  }
  localStorage.setItem("level", level);
  location.href = "quiz.html";
}

/* ---------- RESTORE ON LOAD ---------- */
window.onload = () => {
  const subject = localStorage.getItem("subject");
  if (!subject) return;

  selectedSubject = subject;

  document.querySelectorAll(".subject").forEach(el => {
    if (el.dataset.sub === subject) {
      el.classList.add("selected");
    }
  });

  applyProgress();
};

/* ---------- LOGOUT ---------- */
function logout() {
  localStorage.removeItem("currentUser");
  location.href = "index.html";
}
</script>

</body>
</html>